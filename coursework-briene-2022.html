<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Tom's Articles</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=JetBrains+Mono&display=swap">
    <link rel="stylesheet" href="./css/default.css">
    <link rel="icon" type="image/png" href="./favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="./favicon/favicon.svg" />
    <link rel="shortcut icon" href="./favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon/apple-touch-icon.png" />
    <link rel="manifest" href="./favicon/site.webmanifest" />
</head>
<body>
    <div class="header-buttons">
        <div class="home">
            <a href=".">Все статьи</a>
        </div>
        <div class="tg">
            <a href="https://t.me/tom_suworof_channel">Телеграм-канал</a>
        </div>
    </div>
    <div class="article-root col-md-8 offset-md-2"><h1>Моя курсовая работа про создание сервиса briene</h1>
<div class="article-publication-date">
    <time datetime="2022-06-03 19:33">03.06.2022 19:33</time>
</div>
<p>В настоящее время есть большой спрос на создание личного бренда и блога для продвижения себя на рынке труда или «для души». Компании же всё чаще пользуются услугами копирайтеров и SMM, чтобы наладить контакт с аудиторией путём создания аккаунтов в социальных сетях, специализированных изданий и блогов.</p>
<blockquote>
<p><a href="https://trends.google.ru/trends/explore?date=all&amp;q=%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B9%20%D0%B1%D0%BB%D0%BE%D0%B3,%D0%BB%D0%B8%D1%87%D0%BD%D1%8B%D0%B9%20%D0%B1%D1%80%D0%B5%D0%BD%D0%B4,%D0%BA%D0%BE%D1%80%D0%BF%D0%BE%D1%80%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9%20%D0%B1%D0%BB%D0%BE%D0%B3,SMM">Google Тренды с анализом тенденций</a></p>
</blockquote>
<p><strong>Задача</strong> данной работы – рассказать, зачем сервисы для статей и медиа существуют, какие есть на данный момент и почему я не стал использовать их, а создал свой.</p>
<p>В первую очередь я создал его для себя. У меня в том числе присутствует желание заявлять о себе в медиа-пространстве. Для этих целей можно использовать страницу ВКонтакте, сториз в Инстаграм или завести канал в Телеграме. Я перепробовал все эти варианты и в какой-то момент мне стало этого не хватать - не было нужной функциональности, чтобы эффективно донести мысль. Поэтому я решил создать свой сервис для статей и медиа.</p>
<p>Если отойти от высокой цели самореализации и говорить во всеуслышание, то платформа предоставляет возможность <em>публиковать статьи</em>. А это уже открывает простор для манёвров - <code>briene</code> может быть тем самым медиаресурсом, например, как <a href="https://knife.media/">Нож</a> или <a href="https://www.the-village.ru/">The Village</a>, движком для личного блога. А ещё здесь можно публиковать научные и образовательные статьи, заметки, учебные конспекты и курсовые (как этот текст).</p>
<pre><code class="language-mermaid">graph LR
Контент --&gt; Пользователь
Пользователь --&gt; Контент
</code></pre>
<p>Ключевой особенностью медиа-платформы, социальной сети – любого публичного пространства – является замкнутый круг «Контент-Пользователь». Это означает, что если на платформе мало авторов и, как следствие, мало контента, то будет мало пользователей-читателей – читатель скажет, что тут <em>нечего</em> читать. А если мало читателей, то у авторов нет желания приходить на эту платформу - автор скажет, что тут <em>некому</em> читать. Чтобы сервис стал успешным, он должен привлечь определённое число пользователей, которое уже после будет расти как снежный ком. Этот эффект известен как <a href="https://books.google.ru/books?hl=ru&amp;lr=&amp;id=14nA7_k05NsC&amp;oi=fnd&amp;pg=PR1&amp;dq=critical+mass&amp;ots=6AaJewVaU0&amp;sig=5aG40-F_zkPG8IulIAvlWIFxax0&amp;redir_esc=y#v=onepage&amp;q=critical%20mass&amp;f=false">эффект критической массы</a>.</p>
<p>Если это замкнутый круг, то как существующие платформы из него выбрались? Предлагаю рассмотреть магазины видеоигр и попытки Epic Games Store закрепиться на нём. Сейчас на рынке есть небольшое число сервисов, к которым игроки привыкли и уход от которых крайне труден: есть Steam для ПК, Microsoft Store для консолей Xbox и PlayStation Store для консолей PlayStation. Нам интересен рынок ПК, где абсолютным <a href="https://comparecamp.com/steam-statistics/">лидером является Steam</a>. Поэтому Epic Games <a href="https://www.protocol.com/bulletins/epic-store-catching-up-steam">приходится вкладывать</a> очень много сил (и денег), чтобы привлечь ту самую критическую массу, которая запустит сетевой эффект и бурный рост, который поможет составить конкуренцию Steam.</p>
<blockquote>
<p>Marwell G., Oliver P. The critical mass in collective action. – Cambridge University Press, 1993.</p>
<p>Katz M. L., Shapiro C. Systems competition and network effects //Journal of economic perspectives. – 1994. – Т. 8. – №. 2. – С. 93-115.</p>
</blockquote>
<h2>ГЛАВА 1. Анализ платформ для публикации медиа-материалов</h2>
<h3>Критерии сравнения существующих платформ</h3>
<p>Для сравнения платформ, которые работают с текстом и медиа-материалами, я определил критерии, которые (по моему мнению) являются <em>ключевыми</em> для увеличения аудитории сервиса.</p>
<ul>
<li>
<p><strong>Популярность</strong>. Чтобы сервис стал более популярным, он должен быть хотя бы известным. На отобранных сервисах я читаю сам, слежу за местными авторами, а также вижу их в закладках своих друзей. Конечно, можно было расширить список, включив более популярные сервисы - например, Facebook - но среди своего окружения я их не встречал.</p>
</li>
<li>
<p><strong>Редактор</strong>. Крайне субъективный, но очень важный для автора, критерий. Если сервис предоставляет очень громоздкий интерфейс или есть иные сложности для создания контента (как <a href="https://www.gazeta.ru/tech/2021/04/02/13544858/rutube_future.shtml">RuTube, например, где скудный видео-редактор и ручная модерации</a>), то платформа будет страдать от нехватки контента. Чтобы постараться быть более объективным, при сравнении платформ больше внимания я уделял функциональности редактора.</p>
</li>
<li>
<p><strong>Удобство чтения</strong>. Помимо контента читателей и зрителей привлекает комфорт потребления контента. При этом зачастую комфорт ставится выше самого контента. В этом можно убедиться, посмотрев на <a href="https://ariarzer.dev/resume.html">резюме фронтенд-разработчицы</a> - так и хочется подключить таблицы стилей, чтобы было приятнее читать.</p>
</li>
<li>
<p><strong>Платные возможности для авторов</strong>. Авторы приходят на платформы не просто так, а чтобы заработать. Для них крайне важно создать такую систему получения дохода с контента, которая впишется в их существующую. Например, платный доступ к статьям, система донатов и пожертвований, авторские отчисления.</p>
</li>
</ul>
<h3>Платформы</h3>
<ul>
<li>
<p><strong>ВКонтакте</strong>. Детище Павла Дурова предлагает два способа создания текстового контента: обычный пост и полноценная статья. Эти форматы по-разному выглядят, создаются и воспринимаются алгоритмами рекомендаций. В своём сравнении я буду опираться на полноценные статьи, т.к. посты совсем уж скудные по функциональности на сегодняшний день. Примеры: <a href="https://vk.com/yandex4developers?w=wall-17796776_11539">пост-интервью с руководителем UX-разработки Yandex Cloud</a> и <a href="https://vk.com/@yandex4developers-kultura-eksperimenta">статья Яндекса о культуре эксперимента</a>.</p>
</li>
<li>
<p><strong>Telegram</strong>. Как и у ВКонтакте, у Telegram есть два способа создания контента: сообщение (личное сообщение или пост в канале) и статья в Telegraph. Последний - фактически отдельный сервис, но тесно интегрирован в мессенджер - просмотр статьи доступен без перехода в отдельное приложение, а для написания статей доступен бот внутри мессенджера. Примеры: <a href="https://t.me/ctodaily/1476">пост про AlphaCode</a> и <a href="https://telegra.ph/7-mifov-kotorye-ispolzuet-Apple-dlya-obosnovaniya-30-nogo-naloga-na-prilozheniya-07-28-2">статья Павла Дурова про комиссию AppStore</a>.</p>
</li>
<li>
<p><strong>Хабр</strong>. Хабр имеет несколько подразделов: сам Хабр, Q&amp;A, Карьера и Фриланс. Нас интересует медиа пространство - традиционный <a href="http://habr.com/">Хабр</a>. Платформа позиционирует себя как «Сообщество IT-специалистов» - все статьи так или иначе рассказывают об «IT-тусовке».</p>
</li>
<li>
<p><strong>Платформы «Комитета»: VC.ru, DTF, TJ</strong>. Комитет как издательский дом разработал платформу для блогов - Osnova. На ней работают проекты VC.ru, DTF и TJ. <a href="https://vc.ru/">VC.ru</a> позиционирует себя как платформа для предпринимателей и специалистов, <a href="https://dtf.ru/">DTF</a> - для обсуждения произведений развлекательной индустрии, <a href="https://tjournal.ru/">TJ</a> - платформа для новостей в России и мире.</p>
</li>
<li>
<p><strong>Medium</strong>. <a href="https://medium.com/">Платформа</a> примерно обо всём. При этом сервис сам выступает как готовая платформа для авторов, а также предоставляет средства для создания своих собственных пространств. Например, <a href="https://towardsdatascience.com/">Towards Data Science</a> - пространство внутри платформы.</p>
</li>
</ul>
<h3>Сравнение</h3>
<p>Для всех редакторов справедливо: - Поддерживаются: - Заголовки до 2 уровня. - Модификации шрифта - жирный, курсив и т.п. - Списки нумерованные и ненумерованные. - Текстовые блоки с разделителями. - Блоки с цитированием. У всех выглядят по-разному, но смысл одинаковый. - Удобство: - Комфортная ширина контента.</p>
<p>В таблице приведены только отличительные черты.</p>
<p>|Характеристика|ВКонтакте|Telegram (Telegraph)|Хабр|Комитет|Medium| |-|-|-|-|-|-| |Популярность (млн/месяц)|73|500|33|15|100| |Редактор|- Мультимедиа (фото, видео, музыка, GIF) <br> - Опросы <br> - Товары|- Мультимедиа (фото; видео, твиты по ссылке)| - Мультимедиа (фото; видео, твиты, музыка по ссылке) <br> - Опросы (в конце статьи) <br> - Формулы (в формате Tex) <br> - Скрываемый текстовый блок <br> - Редактор таблиц <br> - Якорные ссылки <br> - Листинги с кодом <br> - Теги|- Мультимедиа (загружаемые фото, видео, аудио) <br> - Опросы <br> - Якорные ссылки <br> - Листинги с кодом <br> - Теги <br> Предпросмотр материала|- Мультимедиа (загружаемое фото, фото из Unspash, видео, встроенное медиа как YouTube или SoundCloud) <br> - Теги <br> - Приватные заметки| |Удобство чтения|Плюсы: ночной режим, просмотр фото на весь экран. Минусы: статья заканчивается рекомендациями других статей.|Плюсы: минималистичный просмотр. Минусы: нет просмотра фото во весь экран.|Плюсы: есть просмотр фото во весь экран. возможности комментирования. Минусы: контент сильно смещён влево, фиксированный блок с рекомендациями.|Плюсы: есть просмотр фото во весь экран, возможности комментирования.|Плюсы: есть просмотр фото во весь экран, заметки в тексте статьи. Минусы: контент сильно смещён влево, фиксированный блок с рекомендациями, статья заканчивается рекомендациями.| |Платные возможности для авторов|Для статей нет, донаты для групп.|Для статей нет, донаты для каналов.|Нет.|Для статей нет, донаты для авторов.|Членство в Medium - часть стоимости отчисляется автору.| |Дополнительно||Тесная интеграция с клиентом Telegram|Мегапосты, система рейтинга (кармы)|Система рейтинга|Подписка на автора по электронной почте|</p>
<p>Источники с данными об аудитории:</p>
<blockquote>
<p><a href="https://vk.company/ru/press/releases/11114/">Пресс-релиз ВК</a></p>
<p><a href="https://rozetked.me/news/23263-vkontakte-podvela-itogi-pervogo-kvartala-2022-goda">ВК подвел итоги первого квартала 2022 года</a></p>
<p><a href="https://vc.ru/social/195967-auditoriya-telegram-prevysila-500-mln-polzovateley-v-mesyac-eto-na-100-mln-bolshe-chem-v-aprele-2020-goda">Аудитория Telegram превысила 500 млн пользователей в месяц — это на 100 млн больше, чем в апреле 2020 года</a></p>
<p><a href="https://vc.ru/flood/34661-issledovanie-ploshchadok-dlya-publikacii-statey-it-tematiki-russkoyazychnyh-i-multi-yazychnyh">Исследование площадок для публикации статей IT-тематики (русскоязычных и мульти-язычных)</a></p>
<p><a href="https://docs.google.com/presentation/d/1zzArmiPgrhLLNUvG8XR6hgQu5U9CT0xZ0JmjoAmG7xg/edit#slide=id.p3">Медиакит «Комитета»</a></p>
<p><a href="https://medium.com/blogging-guide/7-amazing-medium-platform-statistics-688986c518bd">Статистика 7 Медиа-Платформ</a></p>
</blockquote>
<p>Лично я бы расположил платформы в следующем порядке: 1. <strong>Комитет</strong>. Крайне гибкая и дружелюбная для пользователя система, а самоорганизация в виде рейтинга позволяет прозрачным и естественным образом продвигать контент. 2. <strong>ВКонтакте</strong>. Акцент - на контенте, но статьи теряются из-за работы алгоритмов рекомендаций. 3. <strong>Хабр</strong>. Гибкая и дружелюбная система с хорошей системой рейтингов, но не ценит читателя. Боковая панель рекомендаций перетягивает на себя внимание и подталкивает уйти из статьи. 4. <strong>Telegraph</strong>. Минимализм, перетекающий в бедность. Сам по себе Telegram не имеет систему рекомендаций – это просто мессенджер. Более того, Telegraph – сервис для написания и просмотра статей. По функциональности это больше редактор, чем медиа-платформа. 5. <strong>Medium</strong>. Удобная платформа, но не ценит читателя. Очень часто при открытии статьи появляется платёжное окно (paywall), которое не даёт прочитать статью, из-за чего возникает вопрос «а так ли мне хочется прочитать, чтобы за это платить?».</p>
<h2>ГЛАВА 2. Разработка платформы</h2>
<p>Итак, мы разобрались с существующими платформами, определили ориентиры ~~для копирования~~, референсы, определили слабые места, которые стоит избегать. Можно приступать к написанию своей платформы.</p>
<h3>Формат</h3>
<p>Первым делом надо определить, как авторы будут создавать контент. Я остановился на формате <strong>Markdown</strong>. Этот формат особенно популярен среди разработчиков, т.к. позволяет написать что угодно, не отрываясь от клавиатуры. Формат интегрирован в редакторы систем контроля версий (GitLab и GitHub), трекеры задач (Jira) и средства повышения продуктивности (например, <a href="https://obsidian.md/">Obsidian</a>). Подробнее про формат можно прочитать здесь: <a href="https://doka.guide/tools/markdown/">справочник Дока о Markdown</a>.</p>
<p>Сам по себе синтаксис Markdown невыразителен и скучен:</p>
<pre><code>### Формат
Первым делом надо определить, как авторы будут создавать контент. Я остановился
на формате **Markdown**. Этот формат особенно популярен среди разработчиков, т.к. позволяет 
написать что угодно, не отрываясь от клавиатуры. Формат интегрирован в редакторы систем 
контроля версий (GitLab и GitHub), трекеры задач (Jira) и средства повышения продуктивности 
(например, [Obsidian](https://obsidian.md/)). Подробнее про формат можно прочитать здесь: 
[справочник Дока о Markdown](https://doka.guide/tools/markdown/).
</code></pre>
<p>Чтобы его было комфортно читать, он переводится в HTML-код и вставляется на страницу. С этим мне помогает <a href="https://github.com/code-farmer-i/vue-markdown-editor">библиотека Vue Markdown Editor</a>.</p>
<p>Т.к. синтаксис переводится в HTML, то можно сразу писать в нём - редактор при трансляции просто пропустит этот фрагмент:</p>
<pre><code>&lt;div style=&quot;text-align:right&quot;&gt;
Это текст, который будет &quot;липнуть&quot; к правому краю
&lt;br&gt;&lt;br&gt;
&lt;/div&gt;
</code></pre>
<div style="text-align:right">
Это текст, который будет "липнуть" к правому краю
<br><br>
</div>
<p>Таким образом, Markdown легко пользоваться и он позволяет «писать красиво из коробки». Поэтому вокруг него я и решил построить редактор статей. Получилось так, что <em>авторам просто писать, а читателям – приятно читать</em>.</p>
<h3>Основная функциональность</h3>
<p>Мы разобрались, как писать на платформе. Теперь посмотрим, что она умеет и как этим пользоваться.</p>
<h4>Публикация статей</h4>
<p>Любую статью можно опубликовать в двух режимах: <em>черновик</em> и <em>публикация</em>. Черновики может просматривать и редактировать только их автор. Публикации же доступны только всем, но только для чтения.</p>
<p><img src="https://drive.google.com/uc?id=1WWQ7kXATLL3BCX1WgjvhNFnOZ77riJhN" alt="редактор с подписанными кнопками" /></p>
<center><i>Редактор позволяет сохранить черновик и создать публикацию</i></center>
<br>
<br>
<p>После нажатия любой из этих кнопок будет предложено задать краткое описание статьи (Summary) и проставить теги, чтобы читатели быстрее нашли Вашу статью.</p>
<p><img src="https://drive.google.com/uc?id=1r90PN47UyBDk1qRSu5yH5S9gaXu-YARl" alt="описание и теги" /></p>
<center><i>Краткое описание и теги</i></center>
<br>
<br>
<p>После публикации статью можно найти на странице со свежими статьями.</p>
<p><img src="https://drive.google.com/uc?id=1NMR9d1iYc2CEW1yg5-c10Se34mOieVoq" alt="список опубликованных статей" /></p>
<center><i>Так выглядят опубликованные статьи</i></center>
<br>
<br>
<p>Карточка содержит самую базовую информацию о статье: автор, название, дата публикации, теги и краткое описание.</p>
<p><img src="https://drive.google.com/uc?id=1v9KVf53hAFvDEVqUgV10K4yTPcwcIXwc" alt="список моих черновиков" /></p>
<center><i>А так выглядят мои черновики</i></center>
<br>
<br>
<p>Черновики тоже представлены в виде карточек, но рядом с автором отмечен тип статьи - черновик или публикация. В контекстном меню доступны быстрые действия: редактировать статью и удалить.</p>
<h4>Управление закладками</h4>
<p>Пользователь может добавить опубликованную статью в закладки, нажав на иконку закладки. Список закладок доступен из личного кабинета пользователя в соответствующем разделе.</p>
<p><img src="https://drive.google.com/uc?id=1RhE1wx1PEP3xbG3CqyhwZlBWP6S0zHJN" alt="добавить в закладки" /></p>
<center><i>Как добавить статью в закладки</i></center>
<br>
<br>
<p><img src="https://drive.google.com/uc?id=1rqYia9dD7HrqxYUoaKNRIZEsVc-qcEpu" alt="мои закладки" /></p>
<center><i>Список моих закладок</i></center>
<br>
<br>
<h4>Цитирование статьи</h4>
<p>Читатель может выделить фрагмент статьи и превратить его в цитату. Цитата выглядит как специальный код, который ссылается на выделенный фрагмент.</p>
<p>Вот так создаётся цитата:</p>
<p><img src="https://drive.google.com/uc?id=1B-ALQu7F8M0MTzLelMs3QnFDL3LrrJxr" alt="создание цитаты" /></p>
<center><i>Выделенный текст может стать цитатой</i></center>
<br>
<br>
<p>Так она выглядит для читателя:</p>
<blockquote>
<p>контекст важнее факта.</p>
<p>- <a target="_blank" href="https://briene.herokuapp.com/articles/9aaa88eb-9042-4eaa-b818-bb4472d4d144/#:~:text=%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%B2%D0%B0%D0%B6%D0%BD%D0%B5%D0%B5%20%D1%84%D0%B0%D0%BA%D1%82%D0%B0."><i>Контекст</i></a></p>
</blockquote>
<p>А вот так она выглядит для автора:</p>
<pre><code>&gt;контекст важнее факта.
&gt;
&gt;&lt;p&gt;- &lt;a target=&quot;_blank&quot; href=&quot;https://briene.herokuapp.com/articles/9aaa88eb-9042-4eaa-b818-bb4472d4d144/#:~:text=%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BA%D1%81%D1%82%20%D0%B2%D0%B0%D0%B6%D0%BD%D0%B5%D0%B5%20%D1%84%D0%B0%D0%BA%D1%82%D0%B0.&quot;&gt;&lt;i&gt;Контекст&lt;/i&gt;&lt;/a&gt;&lt;/p&gt;
</code></pre>
<h4>Панель администратора</h4>
<p>Чтобы попасть в панель администратора, надо перейти в личный кабинет и, если Вы - администратор - нажать на ссылку Admin.</p>
<p><img src="https://drive.google.com/uc?id=1Zsu-t9IYe07dAGBPPvnAtTaBrT2Enn6H" alt="личный кабинет" /></p>
<center><i>Личный кабинет и вход в панель администратора</i></center>
<br>
<br>
<p>Администратор может управлять пользователями – менять их роли: «заблокирован», «пользователь» «администратор». Также он может видеть, редактировать и удалять все статьи.</p>
<p><img src="https://drive.google.com/uc?id=1QFQ4ItnD6R4iG6nGK0AxEcRPd1XuuSYf" alt="панель администратора" /></p>
<center><i>Панель администратора</i></center>
<br>
<br>
<h4>Поиск</h4>
<p>В верхней части страницы сервиса всегда есть строка поиска. Благодаря ей можно получить список статей, которые будут содержать набранный запрос.</p>
<p><img src="https://drive.google.com/uc?id=1Nm8s8HQFqeVt2GMBL66STAJ-myiVpRxO" alt="строка поиска" /></p>
<center><i>Строка поиска</i></center>
<br>
<br>
<p>Ответом поиска будет список релевантных статей, который можно просматривать постранично. Про технологии поиска будет рассказано в следующем разделе.</p>
<p><img src="https://drive.google.com/uc?id=1aOLUWiSwHTllp7JNGDsSDDdl6ne8D4f1" alt="результаты поиска" /></p>
<center><i>Результаты поиска</i></center>
<br>
<br>
<h3>Реализация</h3>
<p>Мы разобрались, как создавать статьи, что с ними можно делать и что можно делать в сервисе в принципе. Дело осталось за малым - сделать сам сервис.</p>
<h4>Бэкенд</h4>
<ol>
<li><strong>Spring</strong> - бэкенд-фреймворк. Я выбрал этот фреймворк, т.к. в нём у меня больше всего компетенции. А ещё по этому фреймворку очень много документации и готовых лучших практик.</li>
<li><strong>PostgreSQL</strong> - хранилище данных. Было выбрано по той же причине, что и фреймворк.</li>
<li><strong>JSON Web Token</strong> - подход к авторизации пользователей. При данном подходе у каждого пользователя есть уникальная строка, которая называется <em>токен</em>. Эта строка хранится у пользователя в браузере и у платформы на сервере. Когда пользователь входит в свою учётную запись на сайте в первый раз, то создаётся новый токен и отправляется пользователю и серверу. В следующий раз, когда пользователь зайдёт на сайт, то он предъявит свой токен, и сервер его узнает.</li>
<li><strong>Bonsai</strong> - поиск. <a href="https://elements.heroku.com/addons/bonsai">Этот инструмент</a> - расширение для хостинга Heroku. Построен на базе ElasticSearch и предоставляет инструментарий для полнотекстового поиска, без которого не обойтись в сервисе, где есть текстовые материалы.</li>
<li>Прочие инструменты
<ul>
<li>Для сокращения и упрощения кода использовался <strong>Lombok</strong>. Для создания скрипта быстрого запуска и миграции базы данных - <strong>Flyway</strong>. Для проверки сохраняемых сущностей на соответствие требованиям (непустое имя, формат почты, непустой заголовок и т. п.) - <strong>Hibernate Validator</strong> .</li>
</ul>
</li>
</ol>
<h4>Фронтенд</h4>
<ol>
<li><strong>Vue</strong> - фронтенд-фреймворк. Главное (во всяком случае для меня) преимущество этого фреймворка - <em>реактивность</em>. Это означает, что изменение данных сразу вызывает перерисовку интерфейса без необходимости специального вызова. Это требует, например, React и Flutter, поэтому я не стал их использовать.</li>
<li><strong>Vue markdown editor</strong>. Редактор платформы построен именно на этой библиотеке. Стиль редактора можно настроить как обычными web-средствами с помощью CSS, так и с помощью плагинов. Например, один плагин позволяет установить тему, как у GitHub, другой - добавляет синтаксис для создания формул Katex, третий - синтаксис для создания диаграмм Mermaid.</li>
<li><strong>Bootstrap</strong>. Инструмент позволяет создавать адаптивный интерфейс. Т.е. такой интерфейс, который будет меняться в зависимости от устройства - будь то компьютер, смартфон или планшет. Также этот инструмент предоставил стили для базовых элементов: шрифт, меню, формы.</li>
<li>Прочие инструменты
<ul>
<li><strong>Moment</strong> - форматирование даты. <strong>Axios</strong> - http-клиент, который отправляет запросы на бэкенд. <strong>Vuex</strong> - менеджер состояния пользователя.</li>
</ul>
</li>
</ol>
<h4>Диаграммы классов</h4>
<p>Небольшая оговорка - все поля всех классов приватные. Для полей сделаны getter'ы и setter'ы - методы для получения и проставления полей.</p>
<p>На картинке ниже диаграмма классов для <em>entities</em> - сущностей, которые хранятся в базе данных. Центром платформы и диаграммы является <em>Статья</em>. У статьи есть <em>Состояние</em> типа enum (перечисление констант), где есть три значения - «Опубликована», «Черновик» и «Все». Последнее состояние - программная заглушка для запросов, которые просят показать все статьи.</p>
<p>У каждой статьи есть Автор - <em>Пользователь</em>, который её написал. Пользователь имеет массив из <em>Ролей</em>. Роли определяют уровни доступа к функциям платформы и помогают определить, заблокирован пользователь или нет.</p>
<p>Также Пользователь имеет список статей-закладок. Возникает угроза рекурсии - если запросить статью, то ответом будет статья с автором с закладками, у которых тоже есть авторы и т.д. Чтобы такого не происходило, при запросах отправится только имя автора, т.е. ответ вида <em>статья + имя автора</em>.</p>
<p><img src="https://drive.google.com/uc?id=1nhW7vEOqVJXXwPUJhHBxHZRugHPa-V-v" alt="диаграмма классов базы данных" /></p>
<center><i>Диаграмма классов для сущностей, которые хранятся в базе данных</i></center>
<br>
<br>
<p>У <em>Роли</em> есть программная заглушка в виде <em>RoleEnum</em>. Это позволяет не создавать объект каждый раз, а вызывать константу, которая уже имеет готовый объект. Помимо этого, константа содержит служебную информацию: краткое описание роли и действие, приводящее к этому состоянию.</p>
<p>Но сущности - сырой формат данных, который надо преобразовать в лёгкие для браузера объекты - DTO, Data Transfer Objects.</p>
<p><img src="https://drive.google.com/uc?id=1B0efTy-CElRwYuS70Cb6gmvOz12L1Pw6" alt="диаграмма классов ответов" /></p>
<center><i>Диаграмма классов для ответов</i></center>
<br>
<br>
<p>Ключевым классом является <em>PageResponseDTO</em>, который отвечает за постраничные ответы. Это могут быть страницы как со Статьями (<em>ArticleDTO</em>), так и с Пользователями (<em>UserDTO</em>) - поэтому применяется наследование и генерализация. Например, на главной странице будут показаны страницы со Статьями, а в кабинете Администратора - с Пользователями, но под капотом это всё - один класс.</p>
<p><em>SearchResponseDTO</em> - объект для поисковых ответов. Помимо страниц с релевантными статьями содержит предложения к поиску.</p>
<p><em>AuthorDTO</em> содержит информацию про автора - имя, описание и страницу со статьями.</p>
<p><em>ArticleDTO</em> хранит только самую необходимую информацию, которая может быть расположена на соответствующей карточке. Этот объект не хранит контент, т.к. если нужно получить список статей, то у всех надо загрузить контент, а он может быть большим и в карточке он не показывается.</p>
<p>Для просмотра статьи контент, разумеется, нужен и поэтому существует класс-потомок <em>ArticleWithContent</em>, который, как гласит название, содержит контент. При этом контент в сыром виде - в виде Markdown - т.к. перевод в HTML происходит в браузере.</p>
<h4>Диаграммы последовательностей</h4>
<p>Теперь посмотрим, как происходят некоторые - на мой взгляд самые интересные - процессы.</p>
<p><img src="https://drive.google.com/uc?id=1oSfFOfsZ3qFgfUY9H7_v-dCdfxho_XX1" alt="диаграмма регистрации пользователя" /></p>
<center><i>Диаграмма последовательности регистрации пользователя</i></center>
<br>
<br>
<p><em>Регистрация пользователя</em>. Пользователь вводит свои данные, нажимает кнопку Зарегистрироваться (Sign Up), браузер отправляет данные на сервер, чтобы тот сохранил пользователя. В процессе, если пользователь с указанными именем или почтой обнаружены есть в базе, то отправляется ответ с ошибкой. Если пришли новые данные, то пользователь сохраняется с ролью <em>User</em> по умолчанию перенаправляется на страницу входа, где использует данные, которые только что ввёл при регистрации.</p>
<p><img src="https://drive.google.com/uc?id=1DiKoUBHZ6nWFwixZJTLEoJWOMnwFnAVR" alt="диграмма получения статьи для чтения" /></p>
<center><i>Диаграмма последовательности получения статьи для чтения</i></center>
<br>
<br>
<p><em>Получение статьи для просмотра</em>. Для чтения статьи отправляется запрос без флага <code>raw</code>. Этот флаг используется только для вставки текста в редактор. Запрос с флагом raw=true отличается механизмом проверки, может ли пользователь редактировать статью.</p>
<p>Итак, пользователь кликает на ссылку со статьёй. Запрос отправляется на сервер, где происходит поиск статьи. Если нужная статья не найдена, то будет показана страница с ошибкой 404 - «не найдено». Если статья есть, то проверяется, может ли пользователь её смотреть. А смотреть он её может если он администратор (он вправе смотреть любые статьи), автор этой статьи (и это статья-черновик)  или статья опубликована. Если хотя бы одно требование выполнено, то происходит отправка Markdown-контента и рендер статьи в HTML. Иначе будет показана страница «Статья не найдена».</p>
<p><img src="https://drive.google.com/uc?id=1DiKoUBHZ6nWFwixZJTLEoJWOMnwFnAVR" alt="диаграмма страница автора" />'<center><i>Диаграмма последовательности получения страницы автора</i></center> <br></p>
<p>Для получения информации об авторе и его статьях нужно перейти по ссылке, которая содержит его имя - оно есть в карточке статьи и в её полном виде для чтения. Получение информации осуществляется в два запроса. Первый получает данные автора-пользователя, и, если его нет, перенаправляет на страницу ошибки. Если же автор-пользователь есть, то отправляется второй запрос, который собирает все его опубликованные статьи. В конце всё это агрегируется и отправляется одним ответом на страницу.</p>
<p>Страница с автором поддерживает постраничные запросы. При нажатии на  кнопку «Загрузить больше» (Load more) отправляется запрос, похожий на тот, что описан выше, но с другим смещением. Т.е. если в первом случае было запрошено, например, «5 статей, начиная с 0», то второй будет - «5 статей, начиная с 5-й». Статьи из ответа будут соединены с теми, что уже есть на странице.</p>
<h2>Заключение</h2>
<p>В мире постоянно растёт объём информации - становится больше рекламы, советов, книг, новостей. Задача создания систем, способных всё обрабатывать и эффективно доносить до потребителя, является всё более актуальным. При этом важно создать среду, где происходит осознанная работа с информацией, в которой читатель не будет чувствовать себя перегруженным и упускающим что-то.</p>
<p>В ходе данной работы были рассмотрены мотивы создания платформы для публикации медиа, рассказано про существующие решения, а также показана техническая сторона создания сервиса. При этом есть куда развиваться - исправление ошибок, добавление системы модерации контента, перенос сервиса на более удобный хостинг, внедрение новой функциональности.</p>
<h2>Приложения</h2>
<ol>
<li>Исходные файлы: <a href="https://github.com/TomSuworof/briene">Github проекта</a></li>
<li>Сам сервис: <a href="https://briene.herokuapp.com/">Briene</a></li>
</ol>
<blockquote>
<p>Официальная курсовая, которую я отправил научнику и вузу, отличается более скучной стилизацией, строгостью в выражениях, оформлением по ГОСТу. Эта статья - моя курсовая работа, какой она задумывалась. Почти вся работа была написана в этом же сервисе.</p>
</blockquote>
    </div>
</body>
</html>